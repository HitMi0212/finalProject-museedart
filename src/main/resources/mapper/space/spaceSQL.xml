<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="space">
	<insert id="insertSpace" parameterType="space">
		insert
			into space
			values(space_seq.nextval,#{spaceName},#{spacePurpose},#{mainFacility},#{mainProduct},#{maxPeople},#{price},'N')
			<selectKey resultType="_int" order="AFTER" keyProperty="spaceNo">
				select max(space_no) from space
			</selectKey>
	</insert>
	<select id="selectSpaceNo" resultType="_int">
		select
			max(space_no)
			from space
	</select>
	<insert id="insertFile" parameterType="fv">
		insert
			into space_file 
			values(space_file_seq.nextval,#{spaceNo},#{filename},#{filepath},'N')
	</insert>
	<select id="selectAllSpace" resultType="space">
		select
			space_no as spaceNo,
			space_name as spaceName,
			space_purpose as spacePurpose,
			main_facility as mainFacility,
			main_product as mainProduct,
			max_people as maxPeople,
			price
		from space
		where del_yn like 'N' 	
	</select>
	<select id="selectFile" resultType="fv">
		select
			space_no as spaceNo,
			filename,
			filepath,
			thumbnail
		from space_file	
		where thumbnail like 'Y'
	</select>
</mapper>
